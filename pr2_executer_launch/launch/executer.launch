<launch>
    <arg name="run_sim" default="false" />
    <arg name="im" default="false" />

    <!-- executer server -->
    <node pkg="smach_executer" type="executer" name="executer"/>

    <!-- PR2 plugs -->
    <group unless="$(arg im)">
        <group unless="$(arg run_sim)">
            <include file="$(find pr2_plugs_actions)/launch/pr2_arm_ik.launch"/>
            <include file="$(find pr2_plugs_actions)/launch/plug_actions.launch">
                <arg name="run_sim" value="$(arg run_sim)" />
            </include>	 
        </group>
    </group>

    <group if="$(arg im)">
         <include file="$(find pr2_interactive_manipulation)/launch/pr2_interactive_manipulation_robot.launch">
              <arg name="sim" value="$(arg run_sim)" />
              <arg name="throttle_cameras" value="false" />
              <arg name="nav" value="true" />
              <arg unless="$(arg run_sim)" name="plugs" value="true" />
              <arg if="$(arg run_sim)" name="plugs" value="false" />
              <arg name="wg" value="true" />
			  <!--arg name="im_debug" value="true" /-->
         </include>
    </group>

    <group unless="$(arg im)">
        <!-- navigation with a map -->
        <include file="$(find pr2_2dnav)/pr2_2dnav.launch"/>

        <!-- broadcast Willow's map -->
        <node name="map_server" pkg="map_server" type="map_server" 
            args="$(find willow_maps)/willow-sans-whitelab-2010-02-18-0.025.pgm 0.025" machine="c2" />
    </group>

</launch>

